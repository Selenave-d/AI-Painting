# **任务文档：灵感触发器 - V1.0**

## 1. 概述
本项目旨在开发一个"灵感触发器"应用，核心目标是帮助AI绘画用户解决难以撰写高质量提示词（Prompt）的问题。通过提供多种生成方式（固定题材选择、自定义文本输入、二者组合），结合大模型能力，旨在降低AI绘画门槛，提升用户创作效率和激发创意灵感。

### 1.1 项目目标
*   **降低使用门槛**：通过自动生成提示词，使初学者也能快速上手AI绘画。
*   **提升创作效率**：支持批量和组合生成，加速用户探索和筛选满意结果的过程。
*   **激发创意灵感**：提供预设题材和智能组合功能，拓展用户创作思路。

### 1.2 主要功能模块
1.  **提示词生成模块**：核心功能，负责根据用户输入或选择生成提示词。
2.  **结果展示与交互模块**：负责以用户友好的方式展示生成的提示词，并提供复制、编辑等操作。

## 2. 代码实现（高层设计）
我们将采用模块化设计，确保代码的清晰度、可维护性和可扩展性。

### 2.1 提示词生成服务
*   **目的**：负责与后端大模型服务进行交互，获取生成的提示词。
*   **核心逻辑**：
    *   接收前端的用户请求，包括选中的题材（如果有）、自定义输入文本（如果有）和期望的生成数量。
    *   将题材和自定义输入智能组合成一个或多个针对大模型的Prompt请求。
    *   调用大模型API，并处理其返回结果。
    *   对大模型返回的原始提示词进行必要的处理（如格式化、清洗），然后返回给前端。
*   **输入参数**：题材列表（可选）、自定义文本（可选）、生成数量（必选，默认为5，可选10, 20）。
*   **返回值**：生成的提示词列表。
*   **错误处理**：需要处理大模型接口调用失败、响应超时等情况，并向用户提供友好的错误提示。

### 2.2 前端交互界面
*   **目的**：提供直观的用户界面，支持用户选择题材、输入自定义内容、控制生成数量，并展示和操作生成结果。
*   **核心组件**：
    *   **题材选择区域**：以标签云或按钮组形式展示预设题材（如【修仙】、【奇幻】、【赛博朋克】等），支持多选。
    *   **自定义输入框**：允许用户输入核心创意文本，需限制输入长度（100字符以内）。
    *   **生成数量选择器**：提供下拉菜单或按钮组，让用户选择生成数量（5条、10条、20条）。
    *   **操作按钮区**：包含"生成"按钮（触发提示词生成）和"清除"按钮（清空所有选择和输入）。
    *   **结果展示区**：
        *   以卡片列表形式展示每一条生成的提示词。
        *   每张卡片包含：提示词文本、以及"复制"、"编辑"、"收藏"图标按钮。
*   **交互逻辑**：
    *   用户点击题材标签，标签状态切换（选中/未选中）。
    *   用户在输入框输入文本。
    *   用户选择生成数量。
    *   点击"生成"按钮后，禁用输入和选择，显示加载状态，调用后端生成服务。
    *   生成结果返回后，以卡片形式展示。
    *   点击"复制"按钮，将卡片中的提示词文本复制到剪贴板，并显示成功提示。
    *   点击"编辑"按钮，卡片中的提示词文本变为可编辑状态。
    *   点击"收藏"按钮，提供视觉反馈（预留功能，V1.0不实现实际存储）。
    *   点击"清除"按钮，所有题材标签恢复未选中状态，输入框内容清空。

### 2.3 工具函数
*   **文本剪贴板操作**：实现将文本内容复制到用户剪贴板的功能。
*   **输入校验**：用于校验用户自定义输入文本的长度，确保不超过100个字符。

## 3. 使用说明
用户可以通过以下步骤使用"灵感触发器"：

1.  **启动应用**：打开"灵感触发器"应用界面。
2.  **选择生成方式**：
    *   **纯题材生成**：直接点击一个或多个您感兴趣的题材标签（如"修仙"、"奇幻"）。
    *   **纯自定义生成**：在文本输入框中输入您的核心创意或关键词（如"雨夜的东京街头"）。
    *   **组合生成**：先点击题材标签，再在输入框中输入自定义文本，将二者结合。
3.  **选择生成数量**：在"生成"按钮附近选择您希望生成的提示词数量（可选5条、10条或20条，默认5条）。
4.  **点击生成**：点击"生成"按钮，等待系统为您生成提示词。
5.  **查看和操作结果**：
    *   生成的提示词将以独立的卡片形式展示在页面上。
    *   点击每张卡片下方的"复制"按钮可将提示词复制到剪贴板。
    *   点击"编辑"按钮可直接修改卡片中的提示词文本。
    *   点击"收藏"按钮（V1.0仅作视觉预留，无实际存储功能）。
6.  **重新开始**：如需清空所有已选的题材和输入内容，点击"清除"按钮即可。

## 4. 扩展建议
为了未来提升用户体验和功能丰富性，建议考虑以下扩展：

*   **反向提示词（Negative Prompt）生成**：增加自动生成与主提示词相对应的反向提示词功能，以更好地引导AI绘画生成更理想的图像，避免不希望出现的元素。
*   **用户账户与收藏夹管理**：实现用户登录、注册和个人收藏夹功能，允许用户永久保存、管理和分类自己喜欢的提示词。
*   **更丰富的题材与风格库**：持续更新和扩充内置的题材和风格标签，覆盖更广泛的艺术领域和用户偏好。
*   **生成历史记录**：记录用户每次生成的提示词，方便用户回顾、复用或再次编辑。
*   **提示词分享功能**：集成社交分享功能，允许用户方便地将生成的优质提示词分享到各大平台。
*   **高级编辑功能**：提供更强大的提示词编辑工具，如关键词权重调整、结构化编辑等。

## 5. 关键点解释

*   **Prompt工程（提示词工程）**：
    *   **解释**：这是本项目的核心技术之一。Prompt工程是指设计和优化输入给大模型的文本提示，以引导模型生成期望输出的过程。它需要理解大模型的行为模式和对不同关键词、结构和风格的响应。
    *   **在本项目中的应用**：我们将根据用户选择的固定题材和自定义输入，智能地构建一个高质量的Prompt，使其既能准确表达用户的意图，又能充分利用大模型的生成能力，输出细节丰富、风格准确的提示词。
    *   **思路解释**：例如，当用户选择"修仙"题材并输入"白发少年在山顶舞剑"时，系统需要将"修仙"的风格描述（如"仙气缭绕"、"古风"、"道韵"）与用户的主体描述结合，并可能添加一些通用但能提升画面感的描述词（如"史诗级构图"、"高清细节"、"光影效果"）。

*   **大模型接口调用与性能优化**：
    *   **解释**：项目的核心能力依赖于与AI大模型的API交互。调用外部API涉及到网络请求、数据传输和响应等待时间。
    *   **性能考量**：考虑到用户对响应速度的期望（5秒以内），我们需要在API调用时采取优化措施，例如：
        *   **异步处理**：确保API调用不会阻塞用户界面，使用户在等待结果时仍能感知应用是响应的。
        *   **加载指示**：在生成过程中，界面上显示清晰的加载动画或文字，告知用户系统正在处理请求。
        *   **请求优化**：尽可能减少不必要的API请求，合并相似请求，或对常用Prompt进行缓存（如果大模型服务支持）。
*   **边界条件处理**：
    *   **生成数量限制**：单次生成数量上限设置为20条，这是为了防止对大模型资源的滥用，同时避免一次性生成过多结果给用户带来选择困难。
    *   **自定义输入长度限制**：用户自定义输入文本限制在100个字符以内，旨在引导用户输入核心、清晰的创意，避免过于冗长或模糊的描述导致大模型生成效果不佳。这也有助于控制API请求的复杂度。 